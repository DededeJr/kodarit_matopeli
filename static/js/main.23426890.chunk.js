(this.webpackJsonpmatopeli=this.webpackJsonpmatopeli||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n.n(c),o=n(7),s=n.n(o),i=(n(13),n(2)),u=(n(14),n(3)),l=function(e){return Object(u.a)(Array(Math.round(e)).keys())},j=(n(15),function(e){var t=e.points,n=e.setPoints,r=Object(c.useState)(parseInt(localStorage.getItem("snake-board-size"))||15),o=Object(i.a)(r,2),s=o[0],j=o[1],b=Object(c.useState)(parseInt(localStorage.getItem("snake-board-size"))||15),d=Object(i.a)(b,2),f=d[0],O=d[1],m=function(){for(var e=[],t=0;t<s;t++){e[t]=[];for(var n=0;n<f;n++)e[t][n]="blank"}return e},p=function(){return[{name:"tyhj\xe4",location:[]},{name:"keski",location:l(.6*f).map((function(e){return{x:Math.round(s/2),y:e+Math.ceil(.2*f)}}))},{name:"reunat",location:[].concat(Object(u.a)(l(f).map((function(e){return{x:e,y:0}}))),Object(u.a)(l(f).map((function(e){return{x:e,y:f-1}}))),Object(u.a)(l(s).map((function(e){return{x:0,y:e}}))),Object(u.a)(l(s).map((function(e){return{x:s-1,y:e}}))))},{name:"oma",location:[{x:2,y:5},{x:2,y:4},{x:2,y:3},{x:3,y:3},{x:4,y:3}]}]},h=function(){return p()[Math.floor(Math.random()*p().length)]},x=function e(){var t={x:Math.floor(Math.random()*f),y:Math.floor(Math.random()*s)};return S.location.some((function(e){var n=e.x,a=e.y;return t.x===n&&t.y===a}))?e():t},v=Object(c.useState)(h),y=Object(i.a)(v,2),S=y[0],g=y[1],k=Object(c.useState)(m()),N=Object(i.a)(k,2),w=N[0],I=N[1],E=Object(c.useState)([{x:1,y:1}]),M=Object(i.a)(E,2),z=M[0],B=M[1],J=Object(c.useState)("right"),L=Object(i.a)(J,2),C=L[0],G=L[1],A=Object(c.useState)(x()),P=Object(i.a)(A,2),T=P[0],F=P[1],K=Object(c.useState)(),R=Object(i.a)(K,2),W=R[0],Y=R[1],q=Object(c.useState)(!1),D=Object(i.a)(q,2),H=D[0],Q=D[1],U=Object(c.useState)(!1),V=Object(i.a)(U,2),X=V[0],Z=V[1],$=Object(c.useState)(null),_=Object(i.a)($,2),ee=_[0],te=_[1];Object(c.useEffect)((function(){f>=10&&f<=100&&s>=10&&s<=100&&(g(h()),I(m()),F(x()))}),[f,s]);document.addEventListener("keydown",(function(e){switch(e.keyCode){case 37:G("left");break;case 38:G("top");break;case 39:G("right");break;case 40:G("bottom")}}));var ne=w.map((function(e,t){return Object(a.jsx)("div",{className:"Snake-row",children:e.map((function(e,t){return Object(a.jsx)("div",{className:"tile ".concat(e)},t)}))},t)})),ae=function(){var e=z[0],t=z.slice(1,-1).find((function(t){return t.x===e.x&&t.y===e.y})),n=S.location.some((function(t){var n=t.x,a=t.y;return e.x===n&&e.y===a}));return t||n};return function(e,t,n){var a=Object(c.useRef)();Object(c.useEffect)((function(){a.current=e}),[e]),Object(c.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return n(e),function(){return clearInterval(e)}}}),[t,n])}((function(){var e=[];switch(C){case"right":e.push({x:z[0].x,y:(z[0].y+1)%f});break;case"left":e.push({x:z[0].x,y:(z[0].y-1+f)%f});break;case"top":e.push({x:(z[0].x-1+s)%s,y:z[0].y});break;case"bottom":e.push({x:(z[0].x+1)%s,y:z[0].y})}if(ae()){Q(!0),clearInterval(W);var a=JSON.parse(localStorage.getItem("snake-points"))||[],c=prompt("Game ended. What's your name:");a.push({name:c,points:t}),localStorage.setItem("snake-points",JSON.stringify(a)),window.dispatchEvent(new Event("storage"))}ae()&&Q(!0),z.forEach((function(t){e.push(t)}));var r=z[0];r.x===T.x&&r.y===T.y?(F(x),n(t+1)):e.pop(),B(e),function(){var e=m();z.forEach((function(t){e[t.x][t.y]="snake"})),e[T.x][T.y]="food",S.location.forEach((function(t){e[t.x][t.y]="obstacle"})),I(e)}()}),150,Y),Object(a.jsxs)("div",{className:"Snake-board",children:[!X&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{children:["The map is ",f," tiles big"]}),Object(a.jsx)("div",{children:"You can change map size here:"}),Object(a.jsx)("input",{className:"Board-size",placeholder:"Size from 10-100",type:"number",onChange:function(e){var t=parseInt(e.target.value);t<=100&&t>=10?(console.log("OK",t),O(t),j(t),localStorage.setItem("snake-board-size",t)):(console.error("bad",t),te("The board is too ".concat(t>100?"big":"small")))}}),ee&&Object(a.jsx)("div",{className:"Error",children:ee}),Object(a.jsx)("button",{className:"Start-game",onClick:Z,children:"Start"})]}),X&&ne,H&&Object(a.jsx)("div",{className:"Game-over",children:"Game over!"})]})}),b=function(e){var t=e.points;return Object(a.jsxs)("div",{className:"Points",children:[t," pistett\xe4"]})},d=(n(16),function(){return JSON.parse(localStorage.getItem("snake-points"))||[]}),f=function(){var e=Object(c.useState)(d()),t=Object(i.a)(e,2),n=t[0],r=t[1];window.addEventListener("storage",(function(){r(d())}));var o=n.sort((function(e,t){return t.points-e.points}));return Object(a.jsxs)("div",{className:"LeaderBoard",children:[Object(a.jsx)("div",{className:"LeaderBoard-header",children:"Top 5"}),Object(a.jsx)("div",{className:"LeaderBoard-points",children:o.slice(0,5).map((function(e,t){return Object(a.jsxs)("div",{children:[e.name," ",e.points]},"".concat(e.points,"-").concat(t))}))})]})};var O=function(){var e=Object(c.useState)(0),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("header",{className:"App-header",children:"Matopeli"}),Object(a.jsx)(b,{points:n}),Object(a.jsx)(j,{points:n,setPoints:r}),Object(a.jsx)("button",{onClick:function(){return window.location.reload()},children:"New Game"}),Object(a.jsx)(f,{})]})};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(O,{})}),document.getElementById("root"))}],[[17,1,2]]]);
//# sourceMappingURL=main.23426890.chunk.js.map